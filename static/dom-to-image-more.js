/* esm.sh - esbuild bundle(dom-to-image-more@3.3.0) es2022 production */
var gt=Object.create;var z=Object.defineProperty;var yt=Object.getOwnPropertyDescriptor;var wt=Object.getOwnPropertyNames;var vt=Object.getPrototypeOf,Et=Object.prototype.hasOwnProperty;var Tt=(E,o)=>()=>(o||E((o={exports:{}}).exports,o),o.exports),Pt=(E,o)=>{for(var C in o)z(E,C,{get:o[C],enumerable:!0})},q=(E,o,C,F)=>{if(o&&typeof o=="object"||typeof o=="function")for(let D of wt(o))!Et.call(E,D)&&D!==C&&z(E,D,{get:()=>o[D],enumerable:!(F=yt(o,D))||F.enumerable});return E},V=(E,o,C)=>(q(E,o,"default"),C&&q(C,o,"default")),et=(E,o,C)=>(C=E!=null?gt(vt(E)):{},q(o||!E||!E.__esModule?z(C,"default",{value:E,enumerable:!0}):C,E));var K=Tt((J,X)=>{(function(E){"use strict";let o=function(){let u=0;return{escape:function(t){return t.replace(/([.*+?^${}()|[]\/\\])/g,"\\$1")},isDataUrl:function(t){return t.search(/^(data:)/)!==-1},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):function(e){return new Promise(function(r){var i=ot(e.toDataURL().split(",")[1]),c=i.length,T=new Uint8Array(c);for(let m=0;m<c;m++)T[m]=i.charCodeAt(m);r(new Blob([T],{type:"image/png"}))})}(t)},resolveUrl:function(t,e){var r=document.implementation.createHTMLDocument(),i=r.createElement("base"),c=(r.head.appendChild(i),r.createElement("a"));return r.body.appendChild(c),i.href=e,c.href=t,c.href},getAndEncode:function(t){let e=d.impl.urlCache.find(function(r){return r.url===t});return e||(e={url:t,promise:null},d.impl.urlCache.push(e)),e.promise===null&&(d.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime()),e.promise=new Promise(function(r){let i=d.impl.options.httpTimeout,c=new XMLHttpRequest;if(c.onreadystatechange=function(){if(c.readyState===4)if(300<=c.status)m?r(m):w(`cannot fetch resource: ${t}, status: `+c.status);else{let h=new FileReader;h.onloadend=function(){r(h.result)},h.readAsDataURL(c.response)}},c.ontimeout=function(){m?r(m):w(`timeout of ${i}ms occured while fetching resource: `+t)},c.responseType="blob",c.timeout=i,0<d.impl.options.useCredentialsFilters.length&&(d.impl.options.useCredentials=0<d.impl.options.useCredentialsFilters.filter(h=>0<=t.search(h)).length),d.impl.options.useCredentials&&(c.withCredentials=!0),d.impl.options.corsImg&&t.indexOf("http")===0&&t.indexOf(window.location.origin)===-1){var T=(d.impl.options.corsImg.method||"GET").toUpperCase()==="POST"?"POST":"GET";c.open(T,(d.impl.options.corsImg.url||"").replace("#{cors}",t),!0);let h=!1,y=d.impl.options.corsImg.headers||{},P=(Object.keys(y).forEach(function(b){y[b].indexOf("application/json")!==-1&&(h=!0),c.setRequestHeader(b,y[b])}),function(b){try{return JSON.parse(JSON.stringify(b))}catch{w("corsImg.data is missing or invalid")}}(d.impl.options.corsImg.data||""));Object.keys(P).forEach(function(b){typeof P[b]=="string"&&(P[b]=P[b].replace("#{cors}",t))}),c.send(h?JSON.stringify(P):P)}else c.open("GET",t,!0),c.send();let m;function w(h){console.error(h),r("")}d.impl.options.imagePlaceholder&&(T=d.impl.options.imagePlaceholder.split(/,/))&&T[1]&&(m=T[1])})),e.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+u++},delay:function(t){return function(e){return new Promise(function(r){setTimeout(function(){r(e)},t)})}},asArray:function(t){var e=[],r=t.length;for(let i=0;i<r;i++)e.push(t[i]);return e},escapeXhtml:function(t){return t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return t!=="data:,"?new Promise(function(e,r){let i=new Image;d.impl.options.useCredentials&&(i.crossOrigin="use-credentials"),i.onload=function(){window&&window.requestAnimationFrame?window.requestAnimationFrame(function(){e(i)}):e(i)},i.onerror=r,i.src=t}):Promise.resolve()},width:function(t){var e=s(t,"width");if(!isNaN(e))return e;var e=s(t,"border-left-width"),r=s(t,"border-right-width");return t.scrollWidth+e+r},height:function(t){var e=s(t,"height");if(!isNaN(e))return e;var e=s(t,"border-top-width"),r=s(t,"border-bottom-width");return t.scrollHeight+e+r},getWindow:n,isElement:g,isElementHostForOpenShadowRoot:function(t){return g(t)&&t.shadowRoot!==null},isShadowRoot:f,isInShadowRoot:l,isHTMLElement:function(t){return t instanceof n(t).HTMLElement},isHTMLCanvasElement:function(t){return t instanceof n(t).HTMLCanvasElement},isHTMLInputElement:function(t){return t instanceof n(t).HTMLInputElement},isHTMLImageElement:function(t){return t instanceof n(t).HTMLImageElement},isHTMLLinkElement:function(t){return t instanceof n(t).HTMLLinkElement},isHTMLScriptElement:function(t){return t instanceof n(t).HTMLScriptElement},isHTMLStyleElement:function(t){return t instanceof n(t).HTMLStyleElement},isHTMLTextAreaElement:function(t){return t instanceof n(t).HTMLTextAreaElement},isShadowSlotElement:function(t){return l(t)&&t instanceof n(t).HTMLSlotElement},isSVGElement:function(t){return t instanceof n(t).SVGElement},isSVGRectElement:function(t){return t instanceof n(t).SVGRectElement},isDimensionMissing:function(t){return isNaN(t)||t<=0}};function n(t){return t=t?t.ownerDocument:void 0,(t?t.defaultView:void 0)||E||window}function f(t){return t instanceof n(t).ShadowRoot}function l(t){return t!==null&&Object.prototype.hasOwnProperty.call(t,"getRootNode")&&f(t.getRootNode())}function g(t){return t instanceof n(t).Element}function s(t,e){if(t.nodeType===G){let r=k(t).getPropertyValue(e);if(r.slice(-2)==="px")return r=r.slice(0,-2),parseFloat(r)}return NaN}}(),C=function(){let u=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(g,s,t){return n(g)?Promise.resolve(g).then(f).then(function(e){let r=Promise.resolve(g);return e.forEach(function(i){r=r.then(function(c){return l(c,i,s,t)})}),r}):Promise.resolve(g)},shouldProcess:n,impl:{readUrls:f,inline:l}};function n(g){return g.search(u)!==-1}function f(g){for(var s,t=[];(s=u.exec(g))!==null;)t.push(s[1]);return t.filter(function(e){return!o.isDataUrl(e)})}function l(g,s,t,e){return Promise.resolve(s).then(function(r){return t?o.resolveUrl(r,t):r}).then(e||o.getAndEncode).then(function(r){return g.replace((i=s,new RegExp(`(url\\(['"]?)(${o.escape(i)})(['"]?\\))`,"g")),`$1${r}$3`);var i})}}(),F={resolveAll:function(){return D().then(function(u){return Promise.all(u.map(function(n){return n.resolve()}))}).then(function(u){return u.join(`
`)})},impl:{readAll:D}};function D(){return Promise.resolve(o.asArray(document.styleSheets)).then(function(n){let f=[];return n.forEach(function(l){if(Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(l),"cssRules"))try{o.asArray(l.cssRules||[]).forEach(f.push.bind(f))}catch(g){console.error("domtoimage: Error while reading CSS rules from "+l.href,g.toString())}}),f}).then(function(n){return n.filter(function(f){return f.type===CSSRule.FONT_FACE_RULE}).filter(function(f){return C.shouldProcess(f.style.getPropertyValue("src"))})}).then(function(n){return n.map(u)});function u(n){return{resolve:function(){var f=(n.parentStyleSheet||{}).href;return C.inlineAll(n.cssText,f)},src:function(){return n.style.getPropertyValue("src")}}}}let Y={inlineAll:function u(n){if(!o.isElement(n))return Promise.resolve(n);return f(n).then(function(){return o.isHTMLImageElement(n)?Q(n).inline():Promise.all(o.asArray(n.childNodes).map(function(l){return u(l)}))});function f(l){let g=["background","background-image"],s=g.map(function(t){let e=l.style.getPropertyValue(t),r=l.style.getPropertyPriority(t);return e?C.inlineAll(e).then(function(i){l.style.setProperty(t,i,r)}):Promise.resolve()});return Promise.all(s).then(function(){return l})}},impl:{newImage:Q}};function Q(u){return{inline:function(n){return o.isDataUrl(u.src)?Promise.resolve():Promise.resolve(u.src).then(n||o.getAndEncode).then(function(f){return new Promise(function(l){u.onload=l,u.onerror=l,u.src=f})})}}}let H={copyDefaultStyles:!0,imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,useCredentialsFilters:[],httpTimeout:3e4,styleCaching:"strict",corsImg:void 0,adjustClonedNode:void 0},d={toSvg:Z,toPng:function(u,n){return $(u,n).then(function(f){return f.toDataURL()})},toJpeg:function(u,n){return $(u,n).then(function(f){return f.toDataURL("image/jpeg",(n?n.quality:void 0)||1)})},toBlob:function(u,n){return $(u,n).then(o.canvasToBlob)},toPixelData:function(u,n){return $(u,n).then(function(f){return f.getContext("2d").getImageData(0,0,o.width(u),o.height(u)).data})},toCanvas:$,impl:{fontFaces:F,images:Y,util:o,inliner:C,urlCache:[],options:{}}},G=(typeof J=="object"&&typeof X=="object"?X.exports=d:E.domtoimage=d,(typeof Node<"u"?Node.ELEMENT_NODE:void 0)||1),k=(E!==void 0?E.getComputedStyle:void 0)||(typeof window<"u"?window.getComputedStyle:void 0)||globalThis.getComputedStyle,ot=(E!==void 0?E.atob:void 0)||(typeof window<"u"?window.atob:void 0)||globalThis.atob;function Z(u,n){let f=d.impl.util.getWindow(u);var l=n=n||{};l.copyDefaultStyles===void 0?d.impl.options.copyDefaultStyles=H.copyDefaultStyles:d.impl.options.copyDefaultStyles=l.copyDefaultStyles,l.imagePlaceholder===void 0?d.impl.options.imagePlaceholder=H.imagePlaceholder:d.impl.options.imagePlaceholder=l.imagePlaceholder,l.cacheBust===void 0?d.impl.options.cacheBust=H.cacheBust:d.impl.options.cacheBust=l.cacheBust,l.corsImg===void 0?d.impl.options.corsImg=H.corsImg:d.impl.options.corsImg=l.corsImg,l.useCredentials===void 0?d.impl.options.useCredentials=H.useCredentials:d.impl.options.useCredentials=l.useCredentials,l.useCredentialsFilters===void 0?d.impl.options.useCredentialsFilters=H.useCredentialsFilters:d.impl.options.useCredentialsFilters=l.useCredentialsFilters,l.httpTimeout===void 0?d.impl.options.httpTimeout=H.httpTimeout:d.impl.options.httpTimeout=l.httpTimeout,l.styleCaching===void 0?d.impl.options.styleCaching=H.styleCaching:d.impl.options.styleCaching=l.styleCaching;let g=[];return Promise.resolve(u).then(function(s){if(s.nodeType===G)return s;var t=s,e=s.parentNode,r=document.createElement("span");return e.replaceChild(r,t),r.append(s),g.push({parent:e,child:t,wrapper:r}),r}).then(function(s){return function t(e,r,i,c){let T=r.filter;if(e===A||o.isHTMLScriptElement(e)||o.isHTMLStyleElement(e)||o.isHTMLLinkElement(e)||i!==null&&T&&!T(e))return Promise.resolve();return Promise.resolve(e).then(m).then(w).then(function(a){return P(a,y(e))}).then(h).then(function(a){return b(a,e)});function m(a){return o.isHTMLCanvasElement(a)?o.makeImage(a.toDataURL()):a.cloneNode(!1)}function w(a){return r.adjustClonedNode&&r.adjustClonedNode(e,a,!1),Promise.resolve(a)}function h(a){return r.adjustClonedNode&&r.adjustClonedNode(e,a,!0),Promise.resolve(a)}function y(a){return o.isElementHostForOpenShadowRoot(a)?a.shadowRoot:a}function P(a,L){let N=W(L),x=Promise.resolve();if(N.length!==0){let S=k(j(L));o.asArray(N).forEach(function(M){x=x.then(function(){return t(M,r,S,c).then(function(v){v&&a.appendChild(v)})})})}return x.then(function(){return a});function j(S){return o.isShadowRoot(S)?S.host:S}function W(S){return o.isShadowSlotElement(S)?S.assignedNodes():S.childNodes}}function b(a,L){return!o.isElement(a)||o.isShadowSlotElement(L)?Promise.resolve(a):Promise.resolve().then(N).then(x).then(j).then(W).then(function(){return a});function N(){function S(v,p){p.font=v.font,p.fontFamily=v.fontFamily,p.fontFeatureSettings=v.fontFeatureSettings,p.fontKerning=v.fontKerning,p.fontSize=v.fontSize,p.fontStretch=v.fontStretch,p.fontStyle=v.fontStyle,p.fontVariant=v.fontVariant,p.fontVariantCaps=v.fontVariantCaps,p.fontVariantEastAsian=v.fontVariantEastAsian,p.fontVariantLigatures=v.fontVariantLigatures,p.fontVariantNumeric=v.fontVariantNumeric,p.fontVariationSettings=v.fontVariationSettings,p.fontWeight=v.fontWeight}function M(v,p){let I=k(v);I.cssText?(p.style.cssText=I.cssText,S(I,p.style)):(st(r,v,I,i,p),i===null&&(["inset-block","inset-block-start","inset-block-end"].forEach(R=>p.style.removeProperty(R)),["left","right","top","bottom"].forEach(R=>{p.style.getPropertyValue(R)&&p.style.setProperty(R,"0px")})))}M(L,a)}function x(){let S=o.uid();function M(v){let p=k(L,v),I=p.getPropertyValue("content");if(I!==""&&I!=="none"){let ut=function(){let ct=`.${S}:`+v,at=(p.cssText?ft:dt)();return document.createTextNode(ct+`{${at}}`);function ft(){return`${p.cssText} content: ${I};`}function dt(){return o.asArray(p).map(mt).join("; ")+";";function mt(_){let ht=p.getPropertyValue(_),pt=p.getPropertyPriority(_)?" !important":"";return _+": "+ht+pt}}},R=a.getAttribute("class")||"",tt=(a.setAttribute("class",R+" "+S),document.createElement("style"));tt.appendChild(ut()),a.appendChild(tt)}}[":before",":after"].forEach(function(v){M(v)})}function j(){o.isHTMLTextAreaElement(L)&&(a.innerHTML=L.value),o.isHTMLInputElement(L)&&a.setAttribute("value",L.value)}function W(){o.isSVGElement(a)&&(a.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.isSVGRectElement(a))&&["width","height"].forEach(function(S){let M=a.getAttribute(S);M&&a.style.setProperty(S,M)})}}}(s,n,null,f)}).then(rt).then(it).then(function(s){n.bgcolor&&(s.style.backgroundColor=n.bgcolor),n.width&&(s.style.width=n.width+"px"),n.height&&(s.style.height=n.height+"px"),n.style&&Object.keys(n.style).forEach(function(e){s.style[e]=n.style[e]});let t=null;return typeof n.onclone=="function"&&(t=n.onclone(s)),Promise.resolve(t).then(function(){return s})}).then(function(s){let t=n.width||o.width(s),e=n.height||o.height(s);return Promise.resolve(s).then(function(r){return r.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(r)}).then(o.escapeXhtml).then(function(r){var i=(o.isDimensionMissing(t)?' width="100%"':` width="${t}"`)+(o.isDimensionMissing(e)?' height="100%"':` height="${e}"`);return`<svg xmlns="http://www.w3.org/2000/svg"${(o.isDimensionMissing(t)?"":` width="${t}"`)+(o.isDimensionMissing(e)?"":` height="${e}"`)}><foreignObject${i}>${r}</foreignObject></svg>`}).then(function(r){return"data:image/svg+xml;charset=utf-8,"+r})}).then(function(s){for(;0<g.length;){var t=g.pop();t.parent.replaceChild(t.child,t.wrapper)}return s}).then(function(s){return d.impl.urlCache=[],function(){A&&(document.body.removeChild(A),A=null),U&&clearTimeout(U),U=setTimeout(()=>{U=null,B={}},2e4)}(),s})}function $(u,n){return Z(u,n=n||{}).then(o.makeImage).then(function(f){var l=typeof n.scale!="number"?1:n.scale,g=function(t,e){let r=n.width||o.width(t),i=n.height||o.height(t);return o.isDimensionMissing(r)&&(r=o.isDimensionMissing(i)?300:2*i),o.isDimensionMissing(i)&&(i=r/2),t=document.createElement("canvas"),t.width=r*e,t.height=i*e,n.bgcolor&&((e=t.getContext("2d")).fillStyle=n.bgcolor,e.fillRect(0,0,t.width,t.height)),t}(u,l),s=g.getContext("2d");return s.msImageSmoothingEnabled=!1,s.imageSmoothingEnabled=!1,f&&(s.scale(l,l),s.drawImage(f,0,0)),g})}let A=null;function rt(u){return F.resolveAll().then(function(n){var f;return n!==""&&(f=document.createElement("style"),u.appendChild(f),f.appendChild(document.createTextNode(n))),u})}function it(u){return Y.inlineAll(u).then(function(){return u})}function st(u,n,f,l,g){let s=d.impl.options.copyDefaultStyles?function(e,c){var c=function(m){var w=[];do if(m.nodeType===G){var h=m.tagName;if(w.push(h),lt.includes(h))break}while(m=m.parentNode,m);return w}(c),i=function(m){return(e.styleCaching!=="relaxed"?m:m.filter((w,h,y)=>h===0||h===y.length-1)).join(">")}(c);if(B[i])return B[i];var T=function(){if(A)return A.contentWindow;var m=document.characterSet||"UTF-8",w=document.doctype,w=w?(`<!DOCTYPE ${h(w.name)} ${h(w.publicId)} `+h(w.systemId)).trim()+">":"";return(A=document.createElement("iframe")).id="domtoimage-sandbox-"+o.uid(),A.style.visibility="hidden",A.style.position="fixed",document.body.appendChild(A),function(y,P,b,a){try{return y.contentWindow.document.write(P+`<html><head><meta charset='${b}'><title>${a}</title></head><body></body></html>`),y.contentWindow}catch{}var L=document.createElement("meta");L.setAttribute("charset",b);try{var N=document.implementation.createHTMLDocument(a),x=(N.head.appendChild(L),P+N.documentElement.outerHTML);return y.setAttribute("srcdoc",x),y.contentWindow}catch{}return y.contentDocument.head.appendChild(L),y.contentDocument.title=a,y.contentWindow}(A,w,m,"domtoimage-sandbox");function h(y){var P;return y?((P=document.createElement("div")).innerText=y,P.innerHTML):""}}(),c=function(m,w){let h=m.body;do{var y=w.pop(),y=m.createElement(y);h.appendChild(y),h=y}while(0<w.length);return h.textContent="\u200B",h}(T.document,c),T=function(m,w){let h={},y=m.getComputedStyle(w);return o.asArray(y).forEach(function(P){h[P]=P==="width"||P==="height"?"auto":y.getPropertyValue(P)}),h}(T,c);return function(m){do{var w=m.parentElement;w!==null&&w.removeChild(m),m=w}while(m&&m.tagName!=="BODY")}(c),B[i]=T}(u,n):{},t=g.style;o.asArray(f).forEach(function(e){var r,i=f.getPropertyValue(e),c=s[e],T=l?l.getPropertyValue(e):void 0;(i!==c||l&&i!==T)&&(c=f.getPropertyPriority(e),T=t,i=i,c=c,r=0<=["background-clip"].indexOf(e=e),c?(T.setProperty(e,i,c),r&&T.setProperty("-webkit-"+e,i,c)):(T.setProperty(e,i),r&&T.setProperty("-webkit-"+e,i)))})}let U=null,B={},lt=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"]})(J)});var O={};Pt(O,{default:()=>bt});var St=et(K());V(O,et(K()));var{default:nt,...Ct}=St,bt=nt!==void 0?nt:Ct;export{bt as default};
/*! Bundled license information:

dom-to-image-more/dist/dom-to-image-more.min.js:
  (*! dom-to-image-more 14-02-2024 *)
*/
//# sourceMappingURL=dom-to-image-more.mjs.map